# 계획 워크플로 — 서커(커맨더) 역할

**이 문서**: 서커 에이전트가 **계획서만** 작성·갱신하고, 실제 구현·검증은 다른 에이전트가 수행하는 방식을 정의합니다.

---

## 1. 역할 구분

| 역할 | 담당 | 산출물 |
|------|------|--------|
| **서커(커맨더)** | 계획·계획서 업데이트만 | `docs/` 내 계획·태스크 문서 (진행/검증 구분) |
| **진행 에이전트** | 계획서의 「진행」 지시에 따라 구현 | 코드·마이그레이션·UI 변경 |
| **검증 에이전트** | 계획서의 「검증」 지시에 따라 점검 | PASS/FAIL, 발견 이슈 목록 |

- 서커는 **코드 수정·실행을 하지 않음**. 계획서를 쓰고 갱신만 함.
- 진행·검증은 **다른 에이전트(또는 사용자)** 가 계획서를 보고 수행.

---

## 2. 계획서 형식 — 진행 / 검증 분리

각 작업(또는 단계)마다 아래 두 블록을 반드시 구분해서 적습니다.

### 2.1. 진행 (할 일)

- **목적**: 진행 에이전트가 “무엇을 할지”만 명확히 기술.
- **형식**: 복사해서 프롬프트로 쓸 수 있는 지시문.
- **포함할 것**: 대상 파일/경로, 변경 요구사항, 참고할 스펙/브리프 문서.

예:

```markdown
### 진행 (진행 에이전트)

- [ ] **태스크 제목**
  - `src/app/...` / `src/components/...` 에서 ○○ 추가.
  - 참고: `docs/DESIGN_FIRST_IMPRESSION_BRIEF.md` §2.
  - 프롬프트: "DESIGN_FIRST_IMPRESSION_BRIEF §2에 따라 대시보드·리더보드 로딩을 카드형 스켈레톤으로 바꿔줘."
```

### 2.2. 검증 (확인할 일)

- **목적**: 검증 에이전트가 “어떻게 확인할지”만 명확히 기술.
- **형식**: 체크리스트 또는 검증용 프롬프트.
- **포함할 것**: 확인할 화면/경로, 기대 결과, 규칙 준수 여부(예: bty-*.mdc).

예:

```markdown
### 검증 (검증 에이전트)

- [ ] **검증 항목**
  - 대시보드·리더보드 로딩 시 "Loading…" 텍스트 대신 카드형 스켈레톤이 노출되는지 확인.
  - `CardSkeleton` / `LeaderboardListSkeleton` 사용 여부, 규칙 bty-ui-render-only 위반 없음 확인.
  - 결과: PASS/FAIL + 발견 이슈 목록.
```

---

## 3. 사용하는 문서

| 문서 | 용도 |
|------|------|
| **`docs/CURRENT_TASK.md`** | 현재 할 일·한 줄 지시. 진행 에이전트가 여기서 지시를 가져감. |
| **`docs/AGENTS_TURN_BY_TURN.md`** | 단계별 진행 ↔ 검증 번갈아 할 때 사용. 각 단계마다 「진행 할 일」「검증 할 일」 구분. |
| **`docs/NEXT_TASKS_2.md`**, **`docs/NEXT_PROMPTS.md`** | 다음 작업·프롬프트 풀. 서커가 여기 체크박스·내용 갱신. |
| **`docs/PLAN_WORKFLOW.md`** (본 문서) | 서커 역할 정의·계획서 형식(진행/검증) 참고. |

서커는 위 문서들만 갱신하고, **진행**은 진행 에이전트에게, **검증**은 검증 에이전트에게 맡깁니다.

---

## 4. 서커가 할 일 요약

1. **계획서만** 작성·수정 (코드/터미널 실행 금지).
2. 모든 작업(또는 단계)에 대해 **진행**과 **검증**을 나눠서 기술.
3. 진행용 지시는 복사해서 프롬프트로 쓸 수 있게 구체적으로 작성.
4. 검증용 지시는 확인 항목·기대 결과·PASS/FAIL 보고 방식까지 명시.

---

## 5. 진행 ↔ 검증 순서

- 단계 N: **진행 에이전트**가 N 진행 → **검증 에이전트**가 N 검증 → 결과 보고.
- 다음 단계로 넘어갈지 여부는 서커가 계획서에 반영하거나, 사용자 지시에 따름.
