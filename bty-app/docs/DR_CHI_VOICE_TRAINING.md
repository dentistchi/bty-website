# Dr. Chi 멘토 “나의 사상·말투” 반영하기

**목표**: 이용자가 프로그램을 쓸 때 “치선생님이랑 대화한다”고 느끼고, 유의미한 대화였다는 감정을 갖도록, **실제 Dr. Chi의 사상과 말투를 멘토 챗봇에 반영**하는 방법.

---

## 가능한가?

**가능합니다.** 다만 “완벽한 복제”가 아니라 **일관된 톤·가치·말버릇**을 주입하면, 모델이 그걸 따라 “치선생님 같다”는 인상을 주고, 이미 넣어 둔 “깊이·반영·질문”과 합쳐져 **유의미한 대화 느낌**을 줄 수 있습니다.

---

## 훈련 방법 (우선순위 순)

### 1. Dr. Chi 캐릭터/사상 문서 (가장 중요)

- **내용**: 당신이 실제로 멘토할 때 중요히 여기는 것들.
  - 핵심 가치 (예: “먼저 들어주기”, “조언보다 질문”, “자기 돌봄이 먼저” 등)
  - 자주 쓰는 표현·말버릇 (예: “그런 일이 있으니 ~겠어요”, “그게 당신에게는 어떤 의미였나요?”)
  - 피하는 말 (예: “그냥 해보세요”, “다 그런 거예요” 같은 무디게 만드는 말)
  - 주제별로 특히 강조하는 관점 (임상/환자/팀/재무/자기사랑)
- **적용**: 이 내용을 한 덩어리 텍스트로 정리해 **시스템 프롬프트 앞부분**에 넣습니다.  
  → “You are Dr. Chi. Your real-world philosophy and voice (you must embody this): …” 형태.
- **유지보수**: `src/lib/bty/mentor/drChiCharacter.ts`(또는 .md)에 두고, 당신이 직접 수정. 코드는 이 텍스트만 불러와서 프롬프트에 붙입니다.

이것만 해도 “사상 카피”와 “나와 대화한다는 느낌”에 가장 큰 영향을 줍니다.

---

### 2. Few-shot 예시 (실제 대화 스타일)

- **내용**: 실제로 당신이 깊은 대화할 때 했던 것과 비슷한 **2~4개 예시**.
  - 사용자 한 마디 → 당신(Dr. Chi)이었다면 이렇게 말했을 문장.
  - 주제별로 1개씩, 또는 “반영 → 깊이 질문” 패턴이 드러나는 것 위주.
- **형식**: 시스템 프롬프트 안에  
  `Example - User: "…" / Dr. Chi: "…"`  
  형태로 넣습니다. 모델이 말투·길이·깊이를 따라갑니다.
- **데이터**: 실제 대화 기록(동의 받은 것)에서 이름/개인정보만 지우고 문장만 가져와도 됩니다.

이걸 추가하면 “유의미한 대화였다”는 **감정**을 주는 데 도움이 됩니다.

**직원 대화 스크립트를 쓸 때:**  
- **방법 1 (권장)**  
  `mentor_training_dataset_v1.json` 스키마를 쓰면, 한 파일로 **스타일 프로필(philosophy)** + **대화(few-shot)** 를 모두 쓸 수 있습니다.  
  - 파일 위치: `src/lib/bty/mentor/mentor_training_dataset_v1.json`  
  - `mentor_style_profile.ko`(핵심특성, 대화운영규칙, 금지, 대표문장패턴) → 시스템 프롬프트의 Dr. Chi 사상 문단으로 자동 반영됩니다.  
  - `conversations` 안의 대화에서 mentee 발화 → mentor 발화 순으로 **최대 8쌍**을 추출해 few-shot 예시로 씁니다.  
  - 이 파일이 있으면 `drChiExamples.json`·기본 상수보다 **우선** 사용됩니다.  
- **방법 2**  
  `src/lib/bty/mentor/drChiExamples.json`에 `[{ "user": "상대 말", "assistant": "치선생님 답" }, ...]` 형태로 4~8개 넣어도 됩니다. v1 파일이 없거나 대화 추출 결과가 없을 때 사용됩니다.

---

### 3. (선택) 실대화 로그로 파인튜닝

- **언제**: 이용자 수가 많아지고, “더 똑같이 느껴지게” 하고 싶을 때.
- **방식**: 동의 받은 실대화 로그를 정제해 OpenAI fine-tuning 또는 소규모 오픈 모델 파인튜닝에 사용.
- **주의**: 개인정보·동의·저장 정책이 필요하고, 비용·공정성 이슈도 있음.  
  **당장은 1번 + 2번만으로도 “나와 대화한다”는 느낌과 유의미함을 꽤 끌어낼 수 있습니다.**

---

### 4. (선택) 피드백 루프

- “이 답변은 치선생님 같다/아니다” 같은 **평가 버튼**을 두고, “같다”고 표시된 답변만 모아서 나중에 few-shot 예시나 캐릭터 문구를 보강하는 데 쓸 수 있습니다.

---

## “유의미한 대화였다”는 감정

- **깊이**: 이미 프롬프트에 “반영 → 의미·감정 질문 → 이전 말 다시 언급”을 넣어 두었고, Elite는 턴 수도 늘려 두었음.
- **일관된 인격**: 1번(캐릭터/사상) + 2번(예시)으로 **Dr. Chi 한 사람**이 말하는 것처럼 맞추면, 이용자가 “진짜 치선생님이랑 대화한 것 같다”고 느끼기 쉽습니다.
- **둘을 같이** 쓰면: “깊이 있는 대화” + “치선생님 말투·가치”가 합쳐져 **유의미한 대화였다는 느낌**을 주는 구조가 됩니다.

---

## 적용 순서 제안

| 순서 | 내용 |
|------|------|
| 1 | `drChiCharacter.ts`에 “Dr. Chi의 사상·말버릇·가치” 문단 작성 후 시스템 프롬프트에 주입 |
| 2 | 실제 말투가 드러나는 few-shot 예시 2~4개 추가 |
| 3 | (선택) 주제별로 당신이 자주 쓰는 오프닝/질문 한두 개씩 캐릭터 문구에 반영 |
| 4 | (나중) 피드백 수집·파인튜닝 검토 |

정리하면, **“멘토를 당신(Dr. Chi) 사상으로 훈련시킨다”** = **캐릭터 문서 + few-shot 예시를 프롬프트에 넣는 것**부터 시작하면 되고, 그 위에 이미 만든 “깊이·이해” 로직이 올라가서 유의미한 대화 느낌을 주게 할 수 있습니다.
