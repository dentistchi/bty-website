# 진행 과정 로드맵 — 다음에 할 일

제안한 방향(통합 구상 + 아바타·캐릭터)대로 진행할 때 **어떤 순서로 하면 좋을지** 정리한 문서입니다.

---

## MVP 전략 — Arena 우선, 나머지는 맛보기

**설계 원칙**: 프로그램을 **안정적으로** 만들려면, 먼저 **한 축을 완성**한 뒤 다른 영역을 채우는 편이 낫다.

- **Dojo**: 지금은 내용이 거의 없음. 멘토·역지사지 등 구조만 있고, 구체 콘텐츠는 차차 채워 나가면 됨.
- **Dear Me**: 50문항 분석·자존감 회복 훈련 등 **구체적인 그림(플로우·해석·훈련 설계)** 이 아직 없음. 역시 채워 나갈 영역.
- **Arena**: 시나리오·XP·티어·리더보드·주간 퀘스트 등 **구조와 규칙이 이미 정해져 있고**, 구현도 가장 진행됨.

→ **MVP = Arena를 먼저 완성**한다.  
→ **Dojo·Dear Me**는 당분간 **기본적인 맛보기만** 보여 주고, Arena가 안정된 뒤 콘텐츠와 플로우를 차차 채워 나간다.

이렇게 하면 **한 영역(Arena)을 기준으로 데이터·API·화면이 정리**되고, 나중에 Dojo/Dear Me를 붙일 때도 “Arena에 맞춘다”는 기준이 있어 설계가 흔들리지 않는다.

---

## Phase 0: 지금 상태 정리 (이미 완료)

- [x] 랜딩 페이지 (Arena 강조, 3가지 선택)
- [x] 챗봇 전역 노출 (Arena/Dojo/Dear Me 공통)
- [x] Dr. Chi 멘토 + Dear Me 안전 밸브 (Dojo 내)
- [x] 문서: UNIFIED_VISION_FEASIBILITY, AVATAR_AND_CHARACTER_VISION

---

## Phase 1: 챗봇·캐릭터 통일 (빠른 효과)

**목표**: 전역 챗봇을 “한 가이드 캐릭터”로 통일하고, 자존감/학습 감지 시 Dear Me·Dojo 추천.

| 순서 | 작업 | 산출물 | 참고 |
|------|------|--------|------|
| 1-1 | 전역 챗봇에 **Dear Me 안전 밸브** 추가 | `/api/chat`에서 낮은 자존감 패턴 감지 → Dear Me 링크 메시지 | `api/mentor`의 패턴·메시지 복사 |
| 1-2 | 전역 챗봇에 **Dojo 추천** 로직 추가 | 학습/연습 필요해 보일 때 Dojo(멘토·역지사지) 링크 제안 | 시스템 프롬프트 또는 휴리스틱 |
| 1-3 | **가이드 캐릭터 비주얼** 정하기 | Dr. Chi(또는 mascot) 기본 일러스트/아바타 1종 | ✅ 에셋 1개로 챗봇·멘토 공통 사용 (`GUIDE_CHARACTER_ASSET.md`, `GuideCharacterAvatar` 멘토 노출) |
| 1-4 | 챗봇 UI에 **캐릭터 이미지 + 이름** 반영 | 플로팅 챗봇·멘토 화면에 같은 캐릭터 표시 | ✅ 플로팅 버튼=Dr. Chi 아바타, 헤더·메시지에 이미지+이름. 멘토는 1-3에서 반영 |

**완료 기준**: Arena/Dojo/Dear Me 어디서나 같은 캐릭터가 말하고, 힘들면 Dear Me·배우고 싶으면 Dojo로 유도됨.

---

## 챗봇 훈련 시기

**질문**: 구현 먼저 하고 MVP 나오기 전에 챗봇 훈련을 하면 될까?

**권장**: **네. 구현(기능·플로우)을 먼저 하고, MVP 직전에 챗봇 훈련**을 한 번 돌리는 흐름이 좋습니다.

- **이유**:  
  - 지금은 “어디서 어떤 말을 해야 하는지”(Arena/Dojo/Dear Me 역할)가 아직 정리 단계라, 너무 일찍 프롬프트를 다듬으면 나중에 플로우가 바뀔 때 또 수정하게 됩니다.  
  - Arena·랜딩·밸브 등 **구조가 잡힌 뒤**에, “이 구역에서는 이렇게 말한다”를 정리하고 시스템 프롬프트·예시( few-shot)·필요하면 RAG까지 한꺼번에 설계하는 편이 효율적입니다.  
- **훈련 내용 예시**:  
  - 시스템 프롬프트 보강 (역할·말투·금지 표현)  
  - 구역별(bty / today-me) 예시 대화 몇 턴 추가  
  - “챗봇이 되나?” 같은 메타 질문에 대한 짧은 답변 가이드  
  - (선택) BTY·Dear Me 소개 문구를 RAG로 넣어서 질의 시 참조  

→ **정리**: 구현 먼저 진행 → **MVP 나오기 전**에 “챗봇 훈련” 작업(프롬프트·예시·필요 시 RAG)을 한 번 넣으면 됩니다.

---

## 현재 챗 구조 (Dear Me / Dojo / Avatar)

**이 앱(bty-website) 안에서는**:

- **챗은 하나**입니다. `layout`에서 `<Chatbot />` 한 번만 넣어서 **모든 페이지**(랜딩, Arena, Dojo, Dear Me)에 **같은 플로팅 챗**이 뜹니다.
- **동작만 구역별로 나뉩니다.**  
  - **Dear Me** (`/dear-me`) → `mode: "today-me"` (안전해요, 그대로 괜찮아요).  
  - **Dojo·Arena** (`/bty`, `/bty-arena`) → `mode: "bty"` (연습해볼까요, 다른 사람 입장 생각해볼까요).  
- **Avatar**: 이 레포(bty-app)에는 “Avatar” 전용 페이지나 별도 챗이 없습니다.  
  - 다른 도메인/프로젝트(예: dear-me.pages.dev)에서 테스트하신 거라면, 그쪽은 **다른 코드베이스**라 챗 UI·연결 API가 다를 수 있습니다.  
  - 앞으로 아바타 페이지를 이 앱 안에 만든다면, 지금처럼 **같은 `<Chatbot />`** 를 쓰고, 경로에 따라 `mode`만 하나 더 나누면 됩니다 (예: `mode: "avatar"`).

→ **정리**: Dear Me와 Dojo는 **같은 챗이 뜨고, 뒤에서만 mode가 다릅니다.** Avatar가 다른 챗처럼 보인다면, 다른 사이트/배포 때문일 가능성이 큽니다.

---

## Phase 2: Arena 고단계 + 활동 XP (중기)

**목표**: Arena에서 자유 입력 단계 도입, Dojo/Dear Me 활동도 XP로 인정.

| 순서 | 작업 | 산출물 | 참고 |
|------|------|--------|------|
| 2-1 | **Arena 자유 입력** 설계 | 어떤 시나리오·어느 단계에서 텍스트 입력을 받을지 규칙 정리 | 스펙 1페이지 |
| 2-2 | 자유 입력 API 구현 | `POST /api/arena/free-response` (시나리오+사용자 입력 → 피드백+XP) | 기존 engine + LLM 또는 규칙 |
| 2-3 | Arena UI에 자유 입력 단계 추가 | Tier/시나리오에 따라 입력창 노출, 결과·XP 표시 | bty-arena 페이지 |
| 2-4 | **Dojo/Dear Me XP** 설계 | 무엇을 기록할지(멘토 대화 1회, 챗 1회, 체류 시간 등), 얼마나 줄지 | ✅ 스펙 + 이벤트 정의 — `docs/DOJO_DEAR_ME_XP_SPEC.md` |
| 2-5 | Dojo/Dear Me 이벤트 기록 및 XP 반영 | 이벤트 저장(예: arena_events 또는 별도 테이블) + weekly_xp 등과 연동 | ✅ `activity_xp_events`, `recordActivityXp`, `/api/mentor`·`/api/chat` 연동 |

**완료 기준**: 고단계 Arena에서 직접 타이핑 → 피드백·XP, Dojo/Dear Me 이용도 XP에 반영됨.

**2-4·2-5 적용 상태**: Dojo/Dear Me XP 설계는 `DOJO_DEAR_ME_XP_SPEC.md`에 정리되어 있고, `activity_xp_events` 테이블·`recordActivityXp`·멘토/챗 API 연동이 코드에 반영됨. (다른 PC에서 완료 후 이쪽에서 로드맵 반영.)

---

## Phase 3: 사용자 아바타 (중기~장기)

**목표**: “내 모습 닮은 아바타” 생성 및 앱 전반에 통일 표시.

| 순서 | 작업 | 산출물 | 참고 |
|------|------|--------|------|
| 3-1 | **아바타 서비스 선정** | Ready Player Me / Loom / Meta 등 중 1곳, 2D 먼저 검토 | 비용·정책·API 문서 확인 |
| 3-2 | 아바타 생성 플로우 구현 | 사진 업로드 또는 설명 입력 → API 호출 → 아바타 URL 저장 | 프로필 또는 온보딩 단계 |
| 3-3 | DB에 아바타 URL 저장 | `arena_profiles` 또는 사용자 프로필 테이블에 `avatar_url` | 마이그레이션 |
| 3-4 | 대시보드·Arena·프로필에 아바타 표시 | 공통 `UserAvatar` 컴포넌트, 로그인 사용자 아바타 노출 | 기존 레이아웃에 삽입 |
| 3-5 | (선택) 리더보드에 아바타 노출 | Code·Sub Name과 함께 아바타 표시 | leaderboard UI |

**완료 기준**: 사용자가 자신의 아바타를 만들고, 게임/대시보드 전반에서 같은 아바타로 보임.

---

## Phase 4: 코드별 테마·엘리트 5% (장기)

**목표**: 아바타와 무관한 다음 단계. 가이드 캐릭터 코드별 의상/테마, 상위 5% 동기 부여.

| 순서 | 작업 | 산출물 | 참고 |
|------|------|--------|------|
| 4-1 | **코드별 가이드 캐릭터 스킨** | Code별 의상/배경 이미지 1세트 | 에셋 제작 또는 라이선스 |
| 4-2 | 챗봇/멘토에서 코드별 스킨 표시 | 사용자 Code에 따라 가이드 캐릭터 이미지 교체 | 현재 Code 계산 로직 활용 |
| 4-3 | **엘리트 5%** 기능 기획 | 특별 프로젝트, 멘토 프로그램, 해금 콘텐츠, 챔피언십 중 우선순위 | 스펙 문서 |
| 4-4 | 우선순위 높은 1~2개 구현 | 예: 스토리/콘텐츠 해금 또는 멘토 배지·XP | Phase 4-3 결과에 따라 |

**완료 기준**: 코드에 따라 가이드 캐릭터 비주얼이 바뀌고, 상위 5%를 위한 장치가 1개 이상 동작함.

---

## 권장 진행 순서 (한 줄 요약)

**전제**: MVP는 Arena 완성; Dojo·Dear Me는 맛보기 수준 유지 후 차차 채움.

1. **Arena 완성** (버그 수정, 누락 기능, 자유 입력 등) → 한 축이 안정됨.  
2. **Phase 1** (챗봇 밸브 + 가이드 캐릭터 통일) → 전역 체감 개선, Arena와도 잘 맞음.  
3. **Phase 2** (Arena 자유 입력 심화 + 필요 시 Dojo/Dear Me XP) → Arena 성장 루프 강화.  
4. **Phase 3** (사용자 아바타) → 몰입·정체성.  
5. **Phase 4** (코드 테마·엘리트 5%) → 차별화.  
6. **Dojo·Dear Me 콘텐츠** (50문항 분석, 자존감 회복 훈련 설계 등) → Arena가 안정된 뒤 구체 그림을 채워 넣음.

---

## 바로 시작하려면 (오늘~이번 주)

- **1-1** 부터: `/api/chat`에 `api/mentor`와 같은 낮은 자존감 패턴 + Dear Me 안내 메시지를 넣는 것만 해도, “힘들 때 Dear Me로 가세요”가 전역 챗봇에서 동작합니다.

이 문서는 필요하면 각 Phase를 이슈/태스크로 쪼개서 팀이나 스프린트에 넣을 수 있도록 작성했습니다.
