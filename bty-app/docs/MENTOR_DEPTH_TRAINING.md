# 멘토 “깊이·이해” 훈련 방향

멘토가 사용자의 정신세계를 이해하고, 대화를 깊게 이어가도록 하려면 **모델 파인튜닝이 아니라** 아래 세 가지를 조합하는 방식이 현실적입니다.

---

## 1. 프롬프트 설계 (가장 영향 큼)

- **역할**: “한 번에 답 주는 상담사”가 아니라 **사용자의 말을 반영하고, 그다음 질문으로 깊이 파는 멘토**.
- **지시문 예시**:
  - 사용자 말 속 **감정·가치·걱정**을 짧게 반영한 뒤 질문하기.
  - “무슨 일이 있었는지”보다 **“그게 당신에게 어떤 의미인지”** 쪽으로 이끌기.
  - 조언보다 **질문**을 먼저 (소크라테스식).
  - 이전 메시지에서 나온 **키워드·테마**를 다음 턴에서 다시 살짝 언급해 “기억하고 있다”는 느낌 주기.
- **실제 적용**: `api/mentor/route.ts`의 `buildSystemPrompt`에 위 원칙을 문장으로 넣어 두고, 필요 시 주제별로 한두 줄만 더 추가하면 됩니다.

---

## 2. 컨텍스트(대화 이력) 확대

- **현재**: 최근 12턴만 API에 전달.
- **깊이를 위해**: 턴 수를 20~24 정도로 늘리면, “아까 말한 그 부분…”처럼 **이전 말을 기억하고 이어가는** 느낌이 강해짐.
- **Elite 전용 확대**: 이미 상위 5%만 멘토로 유도되므로, Elite일 때만 턴 수를 늘려 “깊은 대화실” 체감을 줄 수 있음 (구현: `toOpenAIMessages`의 `slice(-12)`를 Elite면 `slice(-24)` 등으로 분기).

---

## 3. (선택) “나에 대한 요약”으로 세션 간 이해

- **목적**: 다음에 로그인했을 때, “지난번에 ~라고 하셨죠”처럼 **정신세계를 이어서 이해**하는 느낌을 주려면, 대화 내용을 **한두 문장 요약**해 저장하는 방법이 있음.
- **방식**:
  - “대화 기억하기”가 켜져 있을 때만 사용.
  - 세션 끝(다른 주제로 이동·닫기) 또는 N턴마다, **마지막 N턴을 API에 넘겨 “이 사용자에 대한 1~2문장 요약”**을 생성하고, `user_mentor_summary` 같은 테이블에 저장.
  - 다음 멘토 대화 시 시스템 프롬프트 앞에  
    `[이 사용자에 대한 이해] ...` 를 붙여서 보냄.
- **주의**: 민감 정보이므로 저장/삭제 정책과 동의(대화 기억하기와 함께 설명) 필요.

---

## 4. 따로 “훈련”이 필요한가?

- **파인튜닝**: 우리만의 “깊은 멘토” 말투·패턴을 넣고 싶다면 이론상 가능하지만, 데이터 수집·정제·비용이 크고, **지금 단계에서는 프롬프트만으로도 충분히 깊이를 끌어낼 수 있음**.
- **Few-shot 예시**: 시스템 프롬프트 안에 “깊이 파는 대화” 예시 1~2개(사용자 한 마디 → 멘토 반영 + 질문)를 넣으면, 말투와 전략을 더 일관되게 유도할 수 있음. 이건 **프롬프트 수정만**으로 가능.
- **정리**: “멘토 훈련”은 **별도 ML 파이프라인**이 아니라,  
  **프롬프트 강화 + 컨텍스트 턴 수 + (선택) 사용자 요약 저장** 조합으로 진행하는 것이 현실적인 방법입니다.

---

## 적용 순서 제안

| 순서 | 내용 | 비고 |
|------|------|------|
| 1 | 시스템 프롬프트에 “반영·감정 이름 붙이기·깊이 질문” 명시 | 즉시 적용 가능 |
| 2 | Elite일 때 멘토 API 턴 수 12 → 20~24 | 코드 한 곳 수정 |
| 3 | (선택) 주제별 “자주 묻는 질문” 버튼 | MENTOR_DEPTH_IDEAS.md 참고 |
| 4 | (선택) 세션 끝 “한 문장” 추천 | 동일 |
| 5 | (선택) 사용자 요약 저장·다음 세션에 주입 | DB·API·동의 설계 필요 |

이 문서는 “멘토와의 대화가 깊어지고, 나의 정신세계를 멘토가 이해해 이어가도록 훈련하는 방법”을 **프롬프트·컨텍스트·요약** 관점에서 정리한 것입니다. 별도 모델 훈련 없이 진행할 수 있습니다.
